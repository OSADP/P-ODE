<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="css/main.css">

        <!--[if lt IE 9]>
            <script src="js/vendor/html5-3.6-respond-1.1.0.min.js"></script>
        <![endif]-->
        <script src="js/media/js/jquery.js" type="text/javascript"></script>
        <script src="js/jquery-ui-1.9.2.custom/js/jquery-ui-1_9_2_custom.js" type="text/javascript"></script>
        
        <script type="text/javascript">
            $(document).ready(function() {
                 $.ajax({
                    url:  'resources/getCurrentData',
                    type: 'GET',
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                    success: function(srvResp){
//                        $("#").html();
                        $("#ebI66Time").html(srvResp.eastBoundTravelTime);
                        $("#wbI66Time").html(srvResp.westBoundTravelTime);
                        
                        var currentArray = null;
                        if(srvResp.speedWestValue != null){
                            if(srvResp.speedWestValue instanceof Array){
                                currentArray = srvResp.speedWestValue;
                            }else{
                                currentArray = new Array(srvResp.speedWestValue);
                            }
                            var lastBSM = 1;
                            $.each(currentArray, function(index, m){
                                if(m.source == 'vdot'){
                                    $("#vdotWestSpeed").html(m.dataValue);
                                }
                                if(m.source == 'ritis'){
                                    $("#ritisWestSpeed").html(m.dataValue);
                                }
                                if(m.source == 'blufax'){
                                    $("#blueFaxLnkSpdWest").html(m.dataValue);
                                }
                                if(m.source.lastIndexOf('dms')==0){
                                    $("#bsmWest"+lastBSM).html(m.dataValue);
                                    lastBSM++;
                                    
                                }
                                
                            });
                        }
                        
                        if(srvResp.volumeWestValue != null){
                            if(srvResp.volumeWestValue instanceof Array){
                                currentArray = srvResp.volumeWestValue;
                            }else{
                                currentArray = new Array(srvResp.volumeWestValue);
                            }                               
                            $.each(currentArray, function(index, m){
                                if(m.source == 'vdot'){
                                    $("#vdotWestVol").html(m.dataValue);
                                }
                                if(m.source == 'ritis'){
                                    $("#ritisWestVol").html(m.dataValue);
                                }                                                        
                            });
                            
                        }
                        
                        if(srvResp.occupancyWestValue != null){
                            if(srvResp.occupancyWestValue instanceof Array){
                                currentArray = srvResp.occupancyWestValue;
                            }else{
                                currentArray = new Array(srvResp.occupancyWestValue);
                            }                               
                            $.each(currentArray, function(index, m){
                                if(m.source == 'vdot'){
                                    $("#vdotWestOcc").html(m.dataValue);
                                }
                                if(m.source == 'ritis'){
                                    $("#ritisWestOcc").html(m.dataValue);
                                }                                                        
                            });
                        }
                        if(srvResp.travelTimeWest != null){
                            if(srvResp.travelTimeWest instanceof Array){
                                currentArray = srvResp.travelTimeWest;
                            }else{
                                currentArray = new Array(srvResp.travelTimeWest);
                            }                             
                            $.each(currentArray, function(index, m){
                                if(m.source == 'blufax'){
                                    $("#blueFaxLnkTTWest").html(m.dataValue);
                                }
                                
                            });
                        }                        
                        
                        
                        
                        
                        if(srvResp.speedEastValue != null){
                            if(srvResp.speedEastValue instanceof Array){
                                currentArray = srvResp.speedEastValue;
                            }else{
                                currentArray = new Array(srvResp.speedEastValue);
                            }                  
                            var lastBSM = 1;
                            $.each(currentArray, function(index, m){
                                if(m.source == 'vdot'){
                                    $("#vdotEastSpeed").html(m.dataValue);
                                    
                                }
                                if(m.source == 'ritis'){
                                    $("#ritisEastSpeed").html(m.dataValue);
                                }
                                if(m.source == 'blufax'){
                                    $("#blueFaxLnkSpdEast").html(m.dataValue);
                                }                
                                
                                if(m.source.lastIndexOf('dms')==0){
                                    $("#bsmEast"+lastBSM).html(m.dataValue);
                                    lastBSM++;
                                    
                                }
                                
                            });
                        }
                            
                        
                        
                        if(srvResp.volumeEastValue != null){
                            if(srvResp.volumeEastValue instanceof Array){
                                currentArray = srvResp.volumeEastValue;
                            }else{
                                currentArray = new Array(srvResp.volumeEastValue);
                            }                             
                            
                            $.each(currentArray, function(index, m){
                                if(m.source == 'vdot'){
                                    $("#vdotEastVol").html(m.dataValue);                                    
                                }
                                if(m.source == 'ritis'){
                                    $("#ritisEastVol").html(m.dataValue);
                                }
                            });                                                      
                        }
                        
                        if(srvResp.occupancyEastValue != null){
                            if(srvResp.occupancyEastValue instanceof Array){
                                currentArray = srvResp.occupancyEastValue;
                            }else{
                                currentArray = new Array(srvResp.occupancyEastValue);
                            }                             
                            $.each(currentArray, function(index, m){
                                if(m.source == 'vdot'){
                                    $("#vdotEastOcc").html(m.dataValue);
                                }
                                if(m.source == 'ritis'){
                                    $("#ritisEastOcc").html(m.dataValue);
                                }
                            });
                        }
                        
                        if(srvResp.travelTimeEast != null){
                            if(srvResp.travelTimeEast instanceof Array){
                                currentArray = srvResp.travelTimeEast;
                            }else{
                                currentArray = new Array(srvResp.travelTimeEast);
                            }                             
                            $.each(currentArray, function(index, m){
                                if(m.source == 'blufax'){
                                    $("#blueFaxLnkTTEast").html(m.dataValue);
                                }
                                
                            });
                        }                        
                        
                        
                        if(srvResp.currentWeather != null){
                            var weatherinfo = "";
                            for (var m in srvResp.currentWeather){
                                weatherinfo = weatherinfo + "<div> <strong>"+srvResp.currentWeather[m].dataType+":</strong><span >"+srvResp.currentWeather[m].dataValue+"</span></div>";
                            }
                            $("#weatherInfo1").html(weatherinfo);
                            $("#weatherInfo2").html(weatherinfo);
                        }                        
                        
                        
//                        if(srvResp.ritisSpeedDataEastValue != null){
//                            $("#ritisEastOcc").html(srvResp.ritisSpeedDataEastValue.zoneDetectorDataRITIS.collectionPeriod.collectionPeriodItem[0].zoneReports.zoneReport[0].zoneData.zoneDataItem[0].occupancy);
//                            $("#ritisEastSpeed").html(srvResp.ritisSpeedDataEastValue.zoneDetectorDataRITIS.collectionPeriod.collectionPeriodItem[0].zoneReports.zoneReport[0].zoneData.zoneDataItem[0].zoneVehicleSpeed);
//                            $("#ritisEastVol").html(srvResp.ritisSpeedDataEastValue.zoneDetectorDataRITIS.collectionPeriod.collectionPeriodItem[0].zoneReports.zoneReport[0].zoneData.zoneDataItem[0].zoneVehicleCount);
//                        }
//                        
//                        if(srvResp.vdotSpeedDataEastValue != null){
//                            $("#vdotEastOcc").html(srvResp.vdotSpeedDataEastValue.vdotSpeedDataElements[0].occupancy);
//                            $("#vdotEastSpeed").html(srvResp.vdotSpeedDataEastValue.vdotSpeedDataElements[0].speed);
//                            $("#vdotEastVol").html(srvResp.vdotSpeedDataEastValue.vdotSpeedDataElements[0].volume);
//                        }
//                            
//
//                        if(srvResp.bsmDataEast != null){
//                            if(srvResp.bsmDataEast['20010470000711220000000000000002'] != null){
//                                $("#bsmEast1").html(srvResp.bsmDataEast['20010470000711220000000000000002'].speed);        
//                            }
//                            if(srvResp.bsmDataEast['20010470000710620000000000000002'] != null){
//                                $("#bsmEast2").html(srvResp.bsmDataEast['20010470000710620000000000000002'].speed);
//                            }
//                            if(srvResp.bsmDataEast['20010470000710350000000000000002'] != null){
//                                $("#bsmEast3").html(srvResp.bsmDataEast['20010470000710350000000000000002'].speed);
//                            }
//                        }
//                        
//
//                        if(srvResp.blufaxLinkEast  != null){
//                            $("#blueFaxLnkSpdEast").html(srvResp.blufaxLinkEast.speedAverage);
//                            $("#blueFaxLnkTTEast").html(srvResp.blufaxLinkEast.travelTime);
//                        }
//                        if(srvResp.blufaxRouteEast != null){
//                            $("#blueFaxRtSpdEast").html(srvResp.blufaxRouteEast.speedAverage);
//                            $("#blueFaxRtTTEast").html(srvResp.blufaxRouteEast.travelTime);
//                        }
//                        
//                        
//                        
//                        
//                        
//                        if(srvResp.ritisSpeedDataWestValue != null){
//                            $("#ritisWestOcc").html(srvResp.ritisSpeedDataWestValue.zoneDetectorDataRITIS.collectionPeriod.collectionPeriodItem[0].zoneReports.zoneReport[0].zoneData.zoneDataItem[0].occupancy);
//                            $("#ritisWestSpeed").html(srvResp.ritisSpeedDataWestValue.zoneDetectorDataRITIS.collectionPeriod.collectionPeriodItem[0].zoneReports.zoneReport[0].zoneData.zoneDataItem[0].zoneVehicleSpeed);
//                            $("#ritisWestVol").html(srvResp.ritisSpeedDataWestValue.zoneDetectorDataRITIS.collectionPeriod.collectionPeriodItem[0].zoneReports.zoneReport[0].zoneData.zoneDataItem[0].zoneVehicleCount);
//                        }
//                        
//                        if(srvResp.vdotSpeedDataWestValue != null){
//                            $("#vdotWestOcc").html(srvResp.vdotSpeedDataWestValue.vdotSpeedDataElements[0].occupancy);
//                            $("#vdotWestSpeed").html(srvResp.vdotSpeedDataWestValue.vdotSpeedDataElements[0].speed);
//                            $("#vdotWestVol").html(srvResp.vdotSpeedDataWestValue.vdotSpeedDataElements[0].volume);
//                        }
//                           
//                            
//                        if(srvResp.bsmDataWest != null){
//                            if(srvResp.bsmDataWest['20010470000711220000000000000002'] != null){
//                                $("#bsmWest1").html(srvResp.bsmDataWest['20010470000711220000000000000002'].speed);        
//                            }
//                            if(srvResp.bsmDataWest['20010470000710620000000000000002'] != null){
//                                $("#bsmWest2").html(srvResp.bsmDataWest['20010470000710620000000000000002'].speed);
//                            }
//                            if(srvResp.bsmDataWest['20010470000710350000000000000002'] != null){
//                                $("#bsmWest3").html(srvResp.bsmDataWest['20010470000710350000000000000002'].speed);
//                            }
//                        }                        
//                        
//                       
//                        $("#blueFaxWest").html();
//                        if(srvResp.blufaxLinkWest  != null){
//                            $("#blueFaxLnkSpdWest").html(srvResp.blufaxLinkWest.speedAverage);
//                            $("#blueFaxLnkTTWest").html(srvResp.blufaxLinkWest.travelTime);
//                        }
//                        if(srvResp.blufaxRouteWest != null){
//                            $("#blueFaxRtSpdWest").html(srvResp.blufaxRouteWest.speedAverage);
//                            $("#blueFaxRtTTWest").html(srvResp.blufaxRouteWest.travelTime);
//                        }                        
//                        
//                        
//                        if(srvResp.currentWeather != null){
//                            var weatherinfo = "";
//                            for (var m in srvResp.currentWeather){
//                                weatherinfo = weatherinfo + "<div> <strong>"+srvResp.currentWeather[m].obsTypeName+":</strong><span >"+srvResp.currentWeather[m].englishValue+" "+srvResp.currentWeather[m].englishUnits+"</span></div>";
//                            }
//                            $("#weatherInfo1").html(weatherinfo);
//                            $("#weatherInfo2").html(weatherinfo);
//                        }
                        
//                        var boxes = "";
//                        $.each(srvResp.collectors, function(index, name){
//                            boxes += "<input type='checkbox' id='collectors' value='"+name+"' name='"+name+"'/>"+name+"<br/>";
//                            
//                        });
//                        boxes += "<input type='button' id='submit' value='Start' name='Start' onClick='submitForm()'/>"+name+"<br/>";
//                        $("#checkboxDiv").html(boxes);
                    }
                });
            });
        </script>        
    </head>
    <body>
      <!--[if lt IE 9]>
          <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
      <![endif]-->

      <div class="top-bar">
        <div class="color-bar"></div>
        <div class="color-bar red"></div>
        <div class="color-bar yellow"></div>
        <div class="color-bar green"></div>
      </div>

      <div class="container main">
        <!-- Example row of columns -->
        <div class="row">
          <div class="col-md-6 eastbound-panel">
            <h2 class="top-header">Eastbound</h2>
            <div class="form-group clearfix">
                <div class="col-md-4">
                    <h5>Travel Time</h5>
                </div>
                <div class="col-md-8">
                    <div>
                        <strong>I-66 Travel Time:</strong>
                        <span id="ebI66Time">No Data</span>
                    </div>
                </div>
            </div>
            <div class="form-group clearfix">
              <!-- RITIS -->
              <div class="col-md-4">
                <h5>RITIS</h5>
              </div>
              <div class="col-md-8">
                <div>
                  <strong>Volume:</strong>
                  <span id="ritisEastVol">No Data</span>
                </div>
                <div class="even">
                  <strong>Occupancy:</strong>
                  <span id="ritisEastOcc">No Data</span>
                </div>
                <div>
                  <strong>Speed:</strong>
                  <span id="ritisEastSpeed">No Data</span>
                </div>
              </div>
            </div>
            <!-- VDOT -->
            <div class="form-group clearfix">
              <div class="col-md-4 crimson">
                <h5>VDOT</h5>
              </div>
              <div class="col-md-8 crimson">
                <div class="even">
                  <strong>Volume:</strong>
                  <span id="vdotEastVol">No Data</span>
                </div>
                <div>
                  <strong>Occupancy:</strong>
                  <span id="vdotEastOcc">No Data</span>
                </div>
                <div class="even">
                  <strong>Speed:</strong>
                  <span id="vdotEastSpeed">No Data</span>
                </div>
              </div>
            </div>
            <!-- BSMs -->
            <div class="form-group clearfix">
              <div class="col-md-4 golden">
                <h5>BSMs</h5>
              </div>
              <div class="col-md-8 golden">
                <div class="even">
                  <strong>RSU1:</strong>
                  <span id="bsmEast1">No Data</span>
                </div>
                <div>
                  <strong>RSU2:</strong>
                  <span id="bsmEast2">No Data</span>
                </div>
                <div class="even">
                  <strong>RSU3:</strong>
                  <span id="bsmEast3">No Data</span>
                </div>
              </div>
            </div>
            <!-- BLUFAX -->
            <div class="form-group clearfix">
              <div class="col-md-4 sage">
                <h5>BluFax</h5>
              </div>
              <div class="col-md-8 sage">
                <div>
                  <strong>Link Speed:</strong>
                  <span id="blueFaxLnkSpdEast">No Data</span>
                </div>
                <div class="even">
                  <strong>Link Travel Time:</strong>
                  <span id="blueFaxLnkTTEast">No Data</span>
                </div>
                <div>
                  <strong>Route Speed:</strong>
                  <span id="blueFaxRtSpdEast">No Data</span>
                </div>
                <div class="even">
                  <strong>Route Travel Time:</strong>
                  <span id="blueFaxRtTTEast">No Data</span>
                </div>
              </div>
            </div>
            <!-- Weather -->
            <div class="form-group clearfix">
              <div class="col-md-4 crimson">
                <h5>Weather</h5>
              </div>
              <div id="weatherInfo1" class="col-md-8 crimson">

              </div>
            </div>
            
         </div>
          <!-- WESTBOUND PANEL -->
          <div class="col-md-6 westbound-panel">
            <h2 class="top-header">Westbound</h2>
            <div class="form-group clearfix">
                <div class="col-md-4">
                    <h5>Travel Time</h5>
                </div>
                <div class="col-md-8">
                    <div>
                            <strong>I-66 Travel Time:</strong>
                            <span id="wbI66Time">No Data</span>
                    </div>
                </div>
            </div>            
            <div class="form-group clearfix">
              <!-- RITIS -->
              <div class="col-md-4">
                <h5>RITIS</h5>
              </div>
              <div class="col-md-8">
                <div>
                  <strong>Volume:</strong>
                  <span id="ritisWestVol">No Data</span>
                </div>
                <div class="even">
                  <strong>Occupancy:</strong>
                  <span id="ritisWestOcc">No Data</span>
                </div>
                <div>
                  <strong>Speed:</strong>
                  <span id="ritisWestSpeed">No Data</span>
                </div>
              </div>
            </div>
            <!-- VDOT -->
            <div class="form-group clearfix">
              <div class="col-md-4 crimson">
                <h5>VDOT</h5>
              </div>
              <div class="col-md-8 crimson">
                <div class="even">
                  <strong>Volume:</strong>
                  <span id="vdotWestVol">No Data</span>
                </div>
                <div>
                  <strong>Occupancy:</strong>
                  <span id="vdotWestOcc">No Data</span>
                </div>
                <div class="even">
                  <strong>Speed:</strong>
                  <span id="vdotWestSpeed">No Data</span>
                </div>
              </div>
            </div>
            <!-- BSMs -->
            <div class="form-group clearfix">
              <div class="col-md-4 golden">
                <h5>BSMs</h5>
              </div>
              <div class="col-md-8 golden">
                <div class="even">
                  <strong>RSU1:</strong>
                  <span id="bsmWest1">No Data</span>
                </div>
                <div>
                  <strong>RSU2:</strong>
                  <span id="bsmWest2">No Data</span>
                </div>
                <div class="even">
                  <strong>RSU3:</strong>
                  <span id="bmsWest3">No Data</span>
                </div>
              </div>
            </div>
            <!-- BLUFAX -->
            <div class="form-group clearfix">
              <div class="col-md-4 sage">
                <h5>BluFax</h5>
              </div>
              <div class="col-md-8 sage">
                <div>
                  <strong>Link Speed:</strong>
                  <span id="blueFaxLnkSpdWest">No Data</span>
                </div>
                <div class="even">
                  <strong>Link Travel Time:</strong>
                  <span id="blueFaxLnkTTWest">No Data</span>
                </div>
                <div>
                  <strong>Route Speed:</strong>
                  <span id="blueFaxRtSpdWest">No Data</span>
                </div>
                <div class="even">
                  <strong>Route Travel Time:</strong>
                  <span id="blueFaxRtTTWest">No Data</span>
                </div>
              </div>
            </div>
            <!-- Weather -->
            <div class="form-group clearfix">
              <div class="col-md-4 crimson">
                <h5>Weather</h5>
              </div>
              <div id="weatherInfo2" class="col-md-8 crimson">

              </div>
            </div>
          </div>
        </div>

        <!-- <footer>
          <p>&copy; footer</p>
        </footer> -->

      </div> <!-- /container -->


      <!-- This loads a CDN of jQuery with a local file fallback -->
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.1.min.js"><\/script>')</script>

      <script src="js/vendor/bootstrap.min.js"></script>
      <!-- SCRIPTS GO HERE -->
      
      <!-- // -->
    </body>
</html>

